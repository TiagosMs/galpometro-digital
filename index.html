<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galpômetro Digital | Planejamento de Resíduos</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="css/truck.css">

    <!-- Ícones -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>


</head>

<body>

    <!-- TELA 1: FORMULÁRIO DE ENTRADA -->
    <div class="theme-toggle-container">
        <button id="theme-toggle" class="btn-icon" aria-label="Alternar Tema">
            <i class="ph ph-sun"></i>
        </button>
    </div>
    <section id="input-section" class="container active">
        <div class="form-wrapper card">
            <div class="form-header">
                <h1><i class="ph ph-plant" style="color: var(--primary);"></i> Galpômetro Digital</h1>
                <p>Simule cenários operacionais de reciclagem com dados reais.</p>
            </div>

            <form id="simulation-form">
                <div class="form-group">
                    <h3><i class="ph ph-map-pin"></i> Localização</h3>

                    <div class="input-grid">
                        <div class="input-box">
                            <label>Estado (UF)</label>
                            <select id="ufSelect">
                                <option value="">Carregando...</option>
                            </select>
                        </div>
                        <div class="input-box">
                            <label>Cidade</label>
                            <select id="citySelect" disabled>
                                <option value="">Selecione o Estado</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <h3><i class="ph ph-sliders-horizontal"></i> Parâmetros Operacionais</h3>
                    <div class="input-grid">

                        <!-- 1. População (Automático via IBGE) -->
                        <div class="input-box">
                            <label>População (Censo 2022)</label>
                            <input type="number" id="population" min="1000" placeholder="Aguardando cidade..." required
                                readonly style="opacity: 0.7; cursor: not-allowed;">
                        </div>

                        <!-- 2. Abrangência -->
                        <div class="input-box">
                            <label>Abrangência da Coleta (%)</label>
                            <input type="number" id="abrangencia" min="1" max="100" value="80" required>
                        </div>

                        <!-- 3. Tipo de Caminhão -->
                        <div class="input-box">
                            <label>Tipo de Caminhão</label>
                            <select id="truckType">
                                <option value="Compactador">Compactador (15m³)</option>
                                <option value="Bau" selected>Caminhão Baú (24m³)</option>
                                <option value="Gaiola">Caminhão Gaiola (12m³)</option>
                            </select>
                            <input type="hidden" id="customVolume" value="24">
                        </div>

                        <!-- Visualização Interativa do Caminhão -->
                        <div class="input-box full-width">
                            <label><i class="ph ph-arrows-horizontal"></i> Ajuste o Volume (arraste o baú)</label>
                            <div class="truck-interactive" id="truckInteractive">
                                <div class="truck-scene">
                                    <!-- Caminhão SVG Minimalista -->
                                    <svg id="truckSvg" viewBox="0 0 360 120" xmlns="http://www.w3.org/2000/svg"
                                        class="truck-svg">
                                        <!-- Sombra no chão -->
                                        <ellipse cx="180" cy="108" rx="140" ry="6" fill="rgba(0,0,0,0.15)" />

                                        <!-- Cabine -->
                                        <rect x="10" y="35" width="60" height="55" rx="6" fill="var(--primary)" />
                                        <!-- Janela -->
                                        <rect x="18" y="42" width="28" height="22" rx="3"
                                            fill="rgba(255,255,255,0.35)" />
                                        <!-- Para-choque -->
                                        <rect x="5" y="78" width="12" height="12" rx="2" fill="var(--primary-dim)" />

                                        <!-- Baú (redimensionável) -->
                                        <rect id="truckBodyRect" x="70" y="22" width="180" height="68" rx="4"
                                            fill="var(--bg-input)" stroke="var(--glass-border)" stroke-width="1.5" />
                                        <!-- Linhas decorativas no baú -->
                                        <line id="truckBodyLine1" x1="130" y1="28" x2="130" y2="84"
                                            stroke="var(--glass-border)" stroke-width="0.5" opacity="0.5" />
                                        <line id="truckBodyLine2" x1="190" y1="28" x2="190" y2="84"
                                            stroke="var(--glass-border)" stroke-width="0.5" opacity="0.5" />

                                        <!-- Handle de arraste (na borda direita do baú) -->
                                        <g id="truckDragHandle" cursor="ew-resize">
                                            <rect id="handleHitArea" x="240" y="30" width="24" height="52" rx="4"
                                                fill="var(--secondary)" opacity="0.9" />
                                            <!-- Grip lines -->
                                            <line x1="249" y1="45" x2="249" y2="69" stroke="rgba(255,255,255,0.6)"
                                                stroke-width="1.5" stroke-linecap="round" />
                                            <line x1="253" y1="45" x2="253" y2="69" stroke="rgba(255,255,255,0.6)"
                                                stroke-width="1.5" stroke-linecap="round" />
                                        </g>

                                        <!-- Rodas -->
                                        <circle cx="45" cy="95" r="13" fill="#222" stroke="#555" stroke-width="3" />
                                        <circle cx="45" cy="95" r="4" fill="#777" />
                                        <circle id="truckWheelBack" cx="210" cy="95" r="13" fill="#222" stroke="#555"
                                            stroke-width="3" />
                                        <circle id="truckWheelBackInner" cx="210" cy="95" r="4" fill="#777" />

                                        <!-- Volume Label -->
                                        <text id="truckVolumeText" x="160" y="62" text-anchor="middle"
                                            fill="var(--text-muted)" font-size="14" font-weight="600"
                                            font-family="var(--font-main)">
                                            24m³
                                        </text>
                                    </svg>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div
                        style="margin-top: 10px; font-size: 0.85rem; color: var(--text-muted); background: rgba(255,255,255,0.05); padding: 15px; border-radius: 12px; display: flex; align-items: center; gap: 10px;">
                        <i class="ph ph-info" style="font-size: 1.2rem; color: var(--primary);"></i>
                        <div>
                            <strong>Padrões do Sistema:</strong><br>
                            Geração: 0.95 kg/hab • Índice de Coleta: 10% • Dias Úteis: 22
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn-primary">
                        <i class="ph ph-calculator"></i> Calcular Cenário
                    </button>
                </div>
            </form>
        </div>
    </section>

    <!-- TELA 2: DASHBOARD - VISÃO GERAL -->
    <section id="dashboard-section" class="dashboard-page hidden">
        <button id="btn-back" class="btn-back"><i class="ph ph-arrow-left"></i> Novo Cálculo</button>

        <header class="header-stats">
            <div class="stat-item">
                <p><i class="ph ph-factory"></i> Produção Mensal</p>
                <h3 id="header-coletado">0t</h3>
            </div>
            <div class="stat-item">
                <p><i class="ph ph-users"></i> População Atendida</p>
                <h3 id="header-pop-abr">0</h3>
            </div>
            <div class="stat-item">
                <p><i class="ph ph-recycle"></i> Triado Líquido</p>
                <h3 id="header-triado">0t</h3>
            </div>
            <div class="stat-item">
                <p><i class="ph ph-truck"></i> Frota Estimada</p>
                <h3 id="header-frota">0</h3>
            </div>
        </header>

        <main class="main-panel card">
            <div class="dial">
                <div class="dial-center" id="dial-total-ton">0t</div>

                <div class="dial-item" id="dial-coletado-mes">
                    <p>Meta Mensal</p>
                    <h3 id="dial-val-coletado-mes">0t</h3>
                </div>
                <div class="dial-item" id="dial-triado-mes">
                    <p>Eficiência</p>
                    <h3 id="dial-val-eficiencia">0%</h3>
                </div>
                <div class="dial-item" id="dial-coletado-dia">
                    <p>Diário</p>
                    <h3 id="dial-val-coletado-dia">0t</h3>
                </div>
                <div class="dial-item" id="dial-equipe">
                    <p>Equipe</p>
                    <h3 id="dial-val-equipe">0</h3>
                </div>
            </div>
        </main>

        <div class="page-nav">
            <button class="btn-page" data-page="equipe-section">
                <i class="ph ph-users-three"></i> Quadro de Pessoal
            </button>
            <button class="btn-page" data-page="infra-section">
                <i class="ph ph-wrench"></i> Infraestrutura
            </button>
        </div>
    </section>

    <!-- TELA 3: EQUIPE -->
    <section id="equipe-section" class="dashboard-page hidden">
        <button class="btn-back btn-back-page" data-page="dashboard-section"><i class="ph ph-arrow-left"></i> Voltar ao
            Painel</button>

        <div class="page-title">
            <h2><i class="ph ph-users-three"></i> Quadro de Pessoal</h2>
        </div>

        <div class="card team-stats">
            <div id="team-list-container" class="team-grid"></div>
            <div class="team-item total-row">
                <h5 id="team-total">0</h5>
                <p>TOTAL COLABORADORES</p>
            </div>
        </div>
    </section>

    <!-- TELA 4: INFRAESTRUTURA -->
    <section id="infra-section" class="dashboard-page hidden">
        <button class="btn-back btn-back-page" data-page="dashboard-section"><i class="ph ph-arrow-left"></i> Voltar ao
            Painel</button>

        <div class="page-title">
            <h2><i class="ph ph-wrench"></i> Infraestrutura</h2>
        </div>

        <div class="card infra-stats">
            <div class="stat-row">
                <span>Caminhões</span> <span id="res-caminhoes">0</span>
            </div>
            <div class="stat-row">
                <span>Prensas</span> <span id="res-prensas">0</span>
            </div>
            <div class="stat-row">
                <span>Empilhadeiras</span> <span id="res-empilhadeiras">0</span>
            </div>
            <div class="stat-row">
                <span>Balanças</span> <span id="res-balancas">0</span>
            </div>
        </div>
    </section>

    <!-- Overlay de Carregamento -->
    <div class="spinner-overlay" id="spinnerOverlay">
        <div class="pie-spinner">
            <i class="ph ph-recycle"></i>
        </div>
        <p style="margin-top: 20px; color: #fff; font-size: 1.2rem; letter-spacing: 2px;" id="spinnerText">CALCULANDO...
        </p>
    </div>

    <script src="app.js"></script>
</body>

</html>